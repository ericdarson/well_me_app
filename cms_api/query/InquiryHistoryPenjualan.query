SELECT t.ID_TRANS_JUAL, t.BCA_ID, n.NAMA, n.EMAIL, t.ID_PRODUK, p.NAMA_PRODUK, t.ID_PLAN, pp.NAMA_PLAN, DECODE(t.STATUS_PENJUALAN,0,'CANCELED','1','ORDER',2,'VERIFIED',9,'DONE','ERROR'), NVL(t.NAB,-1), t.JUMLAH_UNIT, NVL(t.NAB * t.JUMLAH_UNIT,-1), TO_CHAR(t.TANGGAL_ORDER_JUAL,'dd-mm-yyyy'), NVL(to_char(t.TANGGAL_VERIFIKASI_BANK,'dd-mm-yyyy'),'-'), NVL(to_char(t.TANGGAL_PENJUALAN,'dd-mm-yyyy'),'-')
FROM T_TRANSAKSI_JUAL t join T_PRODUK_REKSADANA p on t.ID_PRODUK = p.ID_PRODUK
    join T_PLANNER pp ON t.ID_PLAN = pp.ID_PLAN 
    join T_NASABAH n ON t.BCA_ID = n.BCA_ID
WHERE t.BCA_ID LIKE '%s' AND t.TANGGAL_ORDER_JUAL > TRUNC(ADD_MONTHS(SYSDATE,-3))
ORDER BY t.ID_TRANS_JUAL DESC